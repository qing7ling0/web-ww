{"version":3,"sources":["../../src/models/account.js"],"names":["mongoose","require","moment","DB","baseFields","utils","Schema","accountSchema","account","type","String","validate","validator","v","isAccountValid","password","user","Types","ObjectId","user_type","Number","last_login_time","Date","default","format","last_login_ip","module","exports","model"],"mappings":";;;;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;;AAEA,IAAIE,KAAKF,QAAQ,UAAR,CAAT;AACA,IAAIG,aAAaH,QAAQ,eAAR,CAAjB;AACA,IAAII,QAAQJ,QAAQ,gBAAR,CAAZ;;AAEA,IAAIK,SAASN,SAASM,MAAtB;;AAEA,IAAIC,gBAAgB,IAAID,MAAJ;AAClBE,WAAoB,EAACC,MAAKC,MAAN,EAAcC,UAAS;AACzCC,iBAAU,mBAASC,CAAT,EAAY;AACpB,eAAOR,MAAMS,cAAN,CAAqBD,CAArB,CAAP;AACD;AAHwC,KAAvB,EADF;AAMlBE,YAAoB,EAACN,MAAKC,MAAN,EAAcC,UAAS;AACzCC,iBAAU,mBAASC,CAAT,EAAY;AACpB,eAAOR,MAAMS,cAAN,CAAqBD,CAArB,CAAP;AACD;AAHwC,KAAvB,EANF;AAWlBG,QAAoBV,OAAOW,KAAP,CAAaC,QAXf;AAYlBC,aAAoBC,MAZF;AAalBC,mBAAoB,EAAEZ,MAAKa,IAAP,EAAaC,SAAQrB,SAASsB,MAAT,CAAgB,qBAAhB,CAArB,EAbF;AAclBC,iBAAoB,EAAEhB,MAAKC,MAAP,EAAea,SAAQ,EAAvB;AAdF,GAefnB,UAfe,EAApB;AAiBA;AACA;;AAEAsB,OAAOC,OAAP,GAAiB3B,SAAS4B,KAAT,CAAe,SAAf,EAA0BrB,aAA1B,CAAjB","file":"account.js","sourcesContent":["var mongoose = require('mongoose');\r\nvar moment = require('moment')\r\n\r\nvar DB = require('../db/DB')\r\nvar baseFields = require('./base-fields')\r\nvar utils = require('../utils/utils')\r\n\r\nvar Schema = mongoose.Schema;\r\n\r\nvar accountSchema = new Schema({\r\n  account           : {type:String, validate:{\r\n    validator:function(v) {\r\n      return utils.isAccountValid(v);\r\n    }\r\n  }},\r\n  password          : {type:String, validate:{\r\n    validator:function(v) {\r\n      return utils.isAccountValid(v);\r\n    }\r\n  }},\r\n  user              : Schema.Types.ObjectId,\r\n  user_type         : Number,\r\n  last_login_time   : { type:Date, default:moment().format('YYYY-MM-DD HH:mm:ss') },\r\n  last_login_ip     : { type:String, default:'' },\r\n  ...baseFields\r\n});\r\n// DB.addPost(userSchema, ['save', 'find']);\r\n// DB.addPre(userSchema, ['save', 'find']);\r\n\r\nmodule.exports = mongoose.model('account', accountSchema);"]}