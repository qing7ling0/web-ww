{"version":3,"sources":["../../src/models/user.js"],"names":["mongoose","require","moment","DB","constants","baseFields","Schema","SHOP_GUIDE_FIELDS","name","String","account","type","Types","ObjectId","ref","manager","Boolean","sex","shop","birthday","Date","default","height","Number","weight","entry_time","format","leave_time","defautt","user_type","USER_TYPES","shopGuide","shopGuideSchema","module","exports","userShopGuideModel","model","operateSchema","operate","userOperateModel","productionSchema","step","production","userProductionModel","adminSchema","admin","userAdminModel"],"mappings":";;;;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,KAAKF,QAAQ,UAAR,CAAT;;AAEA,IAAIG,YAAYH,QAAQ,wBAAR,CAAhB;AACA,IAAII,aAAaJ,QAAQ,eAAR,CAAjB;;AAEA,IAAIK,SAASN,SAASM,MAAtB;;AAEA,IAAMC;AACJC,QAAMC,MADF;AAEJC,WAAS,EAACC,MAAML,OAAOM,KAAP,CAAaC,QAApB,EAA8BC,KAAI,SAAlC,EAFL;AAGJC,WAASC,OAHL,EAGc;AAClBC,OAAKR,MAJD,EAIS;AACbS,QAAM,EAACP,MAAML,OAAOM,KAAP,CAAaC,QAApB,EAA8BC,KAAI,MAAlC,EALF,EAK6C;AACjDK,YAAU,EAACR,MAAKS,IAAN,EAAYC,SAAQnB,OAAO,OAAK,CAAL,GAAO,CAAd,EAAiB,YAAjB,CAApB,EANN,EAM2D;AAC/DoB,UAAQC,MAPJ,EAOY;AAChBC,UAAQD,MARJ,EAQY;AAChBE,cAAY,EAACd,MAAKS,IAAN,EAAYC,SAAQnB,SAASwB,MAAT,CAAgB,qBAAhB,CAApB,EATR,EASqE;AACzEC,cAAY,EAAChB,MAAKS,IAAN,EAAYQ,SAAQ,IAApB,EAVR,EAUmC;AACvCC,aAAW,EAAClB,MAAKY,MAAN,EAAcF,SAAQjB,UAAU0B,UAAV,CAAqBC,SAA3C;AAXP,GAYD1B,UAZC,CAAN;;AAeA;AACA,IAAI2B,kBAAkB,IAAI1B,MAAJ,CAAWC,iBAAX,CAAtB;AACA0B,OAAOC,OAAP,CAAeC,kBAAf,GAAoCnC,SAASoC,KAAT,CAAe,iBAAf,EAAkCJ,eAAlC,CAApC;;AAEA;AACA,IAAIK,gBAAgB,IAAI/B,MAAJ;AAClBE,QAAMC,MADY;AAElBC,WAAS,EAACC,MAAML,OAAOM,KAAP,CAAaC,QAApB,EAA8BC,KAAI,SAAlC,EAFS;AAGlBG,OAAKR,MAHa;AAIlBoB,aAAW,EAAClB,MAAKY,MAAN,EAAcF,SAAQjB,UAAU0B,UAAV,CAAqBQ,OAA3C;AAJO,GAKfjC,UALe,EAApB;AAOA4B,OAAOC,OAAP,CAAeK,gBAAf,GAAkCvC,SAASoC,KAAT,CAAe,cAAf,EAA+BC,aAA/B,CAAlC;;AAEA;AACA,IAAIG,mBAAmB,IAAIlC,MAAJ;AACrBE,QAAMC,MADe;AAErBC,WAAS,EAACC,MAAML,OAAOM,KAAP,CAAaC,QAApB,EAA8BC,KAAI,SAAlC,EAFY;AAGrBG,OAAKR,MAHgB;AAIrBgC,QAAMhC,MAJe;AAKrBoB,aAAW,EAAClB,MAAKY,MAAN,EAAcF,SAAQjB,UAAU0B,UAAV,CAAqBY,UAA3C;AALU,GAMlBrC,UANkB,EAAvB;AAQA4B,OAAOC,OAAP,CAAeS,mBAAf,GAAqC3C,SAASoC,KAAT,CAAe,iBAAf,EAAkCI,gBAAlC,CAArC;;AAEA;AACA,IAAII,cAAc,IAAItC,MAAJ;AAChBI,WAAS,EAACC,MAAML,OAAOM,KAAP,CAAaC,QAApB,EAA8BC,KAAI,SAAlC,EADO;AAEhBN,QAAMC,MAFU;AAGhBQ,OAAKR,MAHW;AAIhBoB,aAAW,EAAClB,MAAKY,MAAN,EAAcF,SAAQjB,UAAU0B,UAAV,CAAqBe,KAA3C;AAJK,GAKbxC,UALa,EAAlB;AAOA4B,OAAOC,OAAP,CAAeY,cAAf,GAAgC9C,SAASoC,KAAT,CAAe,YAAf,EAA6BQ,WAA7B,CAAhC","file":"user.js","sourcesContent":["var mongoose = require('mongoose');\r\nvar moment = require('moment')\r\nvar DB = require('../db/DB')\r\n\r\nvar constants = require('../constants/constants')\r\nvar baseFields = require('./base-fields')\r\n\r\nvar Schema = mongoose.Schema;\r\n\r\nconst SHOP_GUIDE_FIELDS = {\r\n  name: String,\r\n  account: {type: Schema.Types.ObjectId, ref:'account'},\r\n  manager: Boolean, // 是否店长\r\n  sex: String, // 性别\r\n  shop: {type: Schema.Types.ObjectId, ref:'shop'}, // 店铺\r\n  birthday: {type:Date, default:moment(1990-1-1, 'YYYY-MM-DD')}, // 生日\r\n  height: Number, // 身高\r\n  weight: Number, // 体重\r\n  entry_time: {type:Date, default:moment().format('YYYY-MM-DD HH:mm:ss')}, // 入职日期\r\n  leave_time: {type:Date, defautt:null}, // 离职日期\r\n  user_type: {type:Number, default:constants.USER_TYPES.shopGuide},\r\n  ...baseFields\r\n}\r\n\r\n// 店铺导购\r\nvar shopGuideSchema = new Schema(SHOP_GUIDE_FIELDS);\r\nmodule.exports.userShopGuideModel = mongoose.model('user_shop_guide', shopGuideSchema);\r\n\r\n// 运营人员\r\nvar operateSchema = new Schema({\r\n  name: String,\r\n  account: {type: Schema.Types.ObjectId, ref:'account'},\r\n  sex: String,\r\n  user_type: {type:Number, default:constants.USER_TYPES.operate},\r\n  ...baseFields,\r\n});\r\nmodule.exports.userOperateModel = mongoose.model('user_operate', operateSchema);\r\n\r\n// 生产人员\r\nvar productionSchema = new Schema({\r\n  name: String,\r\n  account: {type: Schema.Types.ObjectId, ref:'account'},\r\n  sex: String,\r\n  step: String,\r\n  user_type: {type:Number, default:constants.USER_TYPES.production},\r\n  ...baseFields,\r\n});\r\nmodule.exports.userProductionModel = mongoose.model('user_production', productionSchema);\r\n\r\n// 管理员\r\nvar adminSchema = new Schema({\r\n  account: {type: Schema.Types.ObjectId, ref:'account'},\r\n  name: String,\r\n  sex: String,\r\n  user_type: {type:Number, default:constants.USER_TYPES.admin},\r\n  ...baseFields,\r\n});\r\nmodule.exports.userAdminModel = mongoose.model('user_admin', adminSchema);"]}