{"version":3,"sources":["../../src/models/shop.1.js"],"names":["mongoose","require","moment","DB","constants","baseFields","Schema","shopFields","name","type","String","description","open_date","Date","default","format","rents_expire_date","rent","area","Number","country","region","province","marketLevel","property","phone","address","zipcode","close_date","close_reason","shopSchema","virtual","get","statics","toClient","item","regionInfo","module","exports","shopModel","model"],"mappings":";;;;;;;;AAAA,IAAIA,WAAWC,QAAQ,UAAR,CAAf;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,KAAKF,QAAQ,UAAR,CAAT;;AAEA,IAAIG,YAAYH,QAAQ,wBAAR,CAAhB;AACA,IAAII,aAAaJ,QAAQ,eAAR,CAAjB;;AAEA,IAAIK,SAASN,SAASM,MAAtB;;AAGO,IAAMC;AACXC,QAAM,EAACC,MAAKC,MAAN,EAAcC,aAAY,MAA1B,EADK;AAEXC,aAAW,EAAEH,MAAMI,IAAR,EAAcC,SAAQZ,SAASa,MAAT,CAAgB,YAAhB,CAAtB,EAAqDJ,aAAY,MAAjE,EAFA;AAGXK,qBAAmB,EAACP,MAAMI,IAAP,EAAaC,SAAQZ,SAASa,MAAT,CAAgB,YAAhB,CAArB,EAAoDJ,aAAY,QAAhE,EAHR;AAIXM,QAAM,EAAER,MAAKC,MAAP,EAAeC,aAAY,IAA3B,EAJK;AAKXO,QAAM,EAACT,MAAMU,MAAP,EAAeR,aAAY,IAA3B,EALK;AAMXS,WAAS,EAAEX,MAAKC,MAAP,EAAeC,aAAY,IAA3B,EANE;AAOXU,UAAO,EAAEZ,MAAKC,MAAP,EAAeC,aAAY,MAA3B,EAPI;AAQXW,YAAU,EAAEb,MAAKC,MAAP,EAAeC,aAAY,GAA3B,EARC;AASXY,eAAa,EAAEd,MAAKC,MAAP,EAAeC,aAAY,MAA3B,EATF;AAUXa,YAAU,EAACf,MAAKC,MAAN,EAAcC,aAAY,YAA1B,EAVC;AAWXc,SAAO,EAAEhB,MAAMC,MAAR,EAAgBC,aAAY,IAA5B,EAXI;AAYXe,WAAS,EAAEjB,MAAKC,MAAP,EAAeC,aAAY,IAA3B,EAZE;AAaXgB,WAAS,EAAElB,MAAKC,MAAP,EAAeC,aAAY,IAA3B,EAbE;AAcXiB,cAAY,EAAEnB,MAAMI,IAAR,EAAcC,SAAQ,EAAtB,EAA0BH,aAAY,MAAtC,EAdD;AAeXkB,gBAAc,EAAEpB,MAAKC,MAAP,EAAeC,aAAY,MAA3B;AAfH,GAgBRN,UAhBQ,CAAN;;AAmBP;AACA,IAAIyB,aAAa,IAAIxB,MAAJ,CAAWC,UAAX,CAAjB;AACAuB,WAAWC,OAAX,CAAmB,YAAnB,EAAiCC,GAAjC,CAAqC,YAAU;AAC7C,SAAO,KAAKZ,OAAL,GAAe,GAAf,GAAqB,KAAKC,MAA1B,GAAmC,GAAnC,GAAyC,KAAKC,QAArD;AACD,CAFD;;AAIAQ,WAAWG,OAAX,CAAmBC,QAAnB,GAA8B,UAASC,IAAT,EAAe;AAC3CA,OAAKC,UAAL,GAAkBD,KAAKf,OAAL,GAAe,GAAf,GAAqBe,KAAKd,MAA1B,GAAmC,GAAnC,GAAyCc,KAAKb,QAAhE;AACAa,OAAKvB,SAAL,GAAiB,KAAjB;AACA,SAAOuB,IAAP;AACD,CAJD;;AAMAE,OAAOC,OAAP,CAAeC,SAAf,GAA2BvC,SAASwC,KAAT,CAAe,MAAf,EAAuBV,UAAvB,CAA3B","file":"shop.1.js","sourcesContent":["var mongoose = require('mongoose');\r\nvar moment = require('moment')\r\nvar DB = require('../db/DB')\r\n\r\nvar constants = require('../constants/constants')\r\nvar baseFields = require('./base-fields')\r\n\r\nvar Schema = mongoose.Schema;\r\n\r\n\r\nexport const shopFields = {\r\n  name: {type:String, description:'门店名称'},\r\n  open_date: { type: Date, default:moment().format('YYYY-MM-DD'), description:'开业时间' },\r\n  rents_expire_date: {type: Date, default:moment().format('YYYY-MM-DD'), description:'房租到期时间'},\r\n  rent: { type:String, description:'租金'},\r\n  area: {type: Number, description:'面积'},\r\n  country: { type:String, description:'国家' },\r\n  region:{ type:String, description:'大区ID'},\r\n  province: { type:String, description:'省' },\r\n  marketLevel: { type:String, description:'市场级别' },\r\n  property: {type:String, description:'店铺性质，是否特卖等'},\r\n  phone: { type: String, description:'电话' },\r\n  address: { type:String, description:'地址' },\r\n  zipcode: { type:String, description:'邮编'},\r\n  close_date: { type: Date, default:'', description:'关店时间'},\r\n  close_reason: { type:String, description:'关店原因'},\r\n  ...baseFields\r\n};\r\n\r\n// 店铺\r\nvar shopSchema = new Schema(shopFields);\r\nshopSchema.virtual('regionInfo').get(function(){\r\n  return this.country + '/' + this.region + '/' + this.province;\r\n});\r\n\r\nshopSchema.statics.toClient = function(item) {\r\n  item.regionInfo = item.country + '/' + item.region + '/' + item.province;\r\n  item.open_date = 'aaa';\r\n  return item;\r\n}\r\n\r\nmodule.exports.shopModel = mongoose.model('shop', shopSchema);\r\n"]}