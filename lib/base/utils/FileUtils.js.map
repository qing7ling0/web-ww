{"version":3,"sources":["../../../src/base/utils/FileUtils.js"],"names":["FileUtils","path","Utils","IsString","replace","index","lastIndexOf","substring","srcPath","dstPath","GetFileDirPath","ind","indexOf","length","i","srcs","split","dsts","ret"],"mappings":"AAAA;;;;;;;;;;IAEMA,S;;;;;;;;AACJ;;;;;;;;mCAQsBC,I,EAAM;AAC1B,UAAI,CAACA,IAAD,IAAS,CAACC,MAAMC,QAAN,CAAeF,IAAf,CAAd,EAAoC,OAAO,EAAP;AACpC;AACAA,aAAOA,KAAKG,OAAL,CAAa,KAAb,EAAoB,GAApB,CAAP;AACA,UAAIC,QAAQJ,KAAKK,WAAL,CAAiB,GAAjB,CAAZ;AACA,UAAID,UAAU,CAAC,CAAf,EAAkB,OAAOJ,IAAP,CAAlB,KACK;AACH,eAAOA,KAAKM,SAAL,CAAe,CAAf,EAAkBF,KAAlB,CAAP;AACD;AACF;;AAED;;;;;;;;;;;gCAQmBJ,I,EAAM;AACvB,UAAI,CAACA,IAAD,IAAS,CAACC,MAAMC,QAAN,CAAeF,IAAf,CAAd,EAAoC,OAAO,EAAP;;AAEpCA,aAAOA,KAAKG,OAAL,CAAa,KAAb,EAAoB,GAApB,CAAP;AACA,UAAIC,QAAQJ,KAAKK,WAAL,CAAiB,GAAjB,CAAZ;AACA,UAAID,UAAU,CAAC,CAAf,EAAkB,OAAOJ,IAAP,CAAlB,KACK;AACH,eAAOA,KAAKM,SAAL,CAAeF,QAAQ,CAAvB,CAAP;AACD;AACF;;AAED;;;;;;;;;;;wCAQ2BG,O,EAASC,O,EAAS;AAC3C;AACA;;AAEAD,gBAAUN,MAAMQ,cAAN,CAAqBF,OAArB,CAAV;AACAA,gBAAUA,QAAQJ,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAV;AACAI,gBAAUA,QAAQJ,OAAR,CAAgB,SAAhB,EAA2B,EAA3B,CAAV;AACAK,gBAAUA,QAAQL,OAAR,CAAgB,KAAhB,EAAuB,GAAvB,CAAV;AACAK,gBAAUA,QAAQL,OAAR,CAAgB,SAAhB,EAA2B,EAA3B,CAAV;AACA,UAAIO,MAAMF,QAAQG,OAAR,CAAgBJ,OAAhB,CAAV;AACA,UAAIG,QAAQ,CAAC,CAAb,EAAgB,OAAOF,QAAQF,SAAR,CAAkBI,MAAMH,QAAQK,MAAhC,EAAwCT,OAAxC,CAAgD,SAAhD,EAA2D,EAA3D,CAAP;AAChBO,YAAM,CAAC,CAAP;AACA,WAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIN,QAAQK,MAA5B,EAAoCC,GAApC,EAAyC;AACvC,YAAIN,QAAQM,CAAR,MAAeL,QAAQK,CAAR,CAAnB,EAA+B;AAC7B;AACD;AACDH,cAAMG,CAAN;AACD;AACD,UAAIH,MAAM,CAAC,CAAX,EAAc;AACZH,kBAAUA,QAAQD,SAAR,CAAkBI,GAAlB,CAAV;AACAF,kBAAUA,QAAQF,SAAR,CAAkBI,GAAlB,CAAV;AACD;;AAED,UAAII,OAAOP,QAAQQ,KAAR,CAAc,GAAd,CAAX;AACA,UAAIC,OAAOR,QAAQO,KAAR,CAAc,GAAd,CAAX;AACA,UAAIE,MAAM,EAAV;AACA,WAAK,IAAIJ,KAAI,CAAb,EAAgBA,KAAIC,KAAKF,MAAzB,EAAiCC,IAAjC,EAAsC;AACpCI,cAAMA,MAAM,KAAZ;AACD;AACDA,YAAMA,MAAMT,OAAZ;AACA;;AAEA,aAAOS,GAAP;AACD;;;;;;kBAGYlB,S","file":"FileUtils.js","sourcesContent":["'use strict'\r\n\r\nclass FileUtils {\r\n  /**\r\n   * 根据文件路径返回文件目录\r\n   * \r\n   * @static\r\n   * @param {any} path \r\n   * @returns \r\n   * @memberof Utils\r\n   */\r\n  static GetFileDirPath(path) {\r\n    if (!path || !Utils.IsString(path)) return '';\r\n    // let path = 'c:/aaa/bb/c/d.js'\r\n    path = path.replace(/\\\\/g, '/');\r\n    let index = path.lastIndexOf('/');\r\n    if (index === -1) return path;\r\n    else {\r\n      return path.substring(0, index);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 根据文件路径返回文件名称带后缀名\r\n   * \r\n   * @static\r\n   * @param {any} path \r\n   * @returns \r\n   * @memberof Utils\r\n   */\r\n  static GetFileName(path) {\r\n    if (!path || !Utils.IsString(path)) return '';\r\n\r\n    path = path.replace(/\\\\/g, '/');\r\n    let index = path.lastIndexOf('/');\r\n    if (index === -1) return path;\r\n    else {\r\n      return path.substring(index + 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 返回相对路径\r\n   * \r\n   * @static\r\n   * @param {any} srcPath \r\n   * @param {any} dstPath \r\n   * @memberof Utils\r\n   */\r\n  static GetFileRelativePath(srcPath, dstPath) {\r\n    // let srcPath = 'c:/aa/dx/a/b.js'\r\n    // let dstPath = 'c:/aa/d/b/x.js'\r\n\r\n    srcPath = Utils.GetFileDirPath(srcPath);\r\n    srcPath = srcPath.replace(/\\\\/g, '/');\r\n    srcPath = srcPath.replace(/(\\/+)$/g, '');\r\n    dstPath = dstPath.replace(/\\\\/g, '/');\r\n    dstPath = dstPath.replace(/(\\/+)$/g, '');\r\n    let ind = dstPath.indexOf(srcPath);\r\n    if (ind !== -1) return dstPath.substring(ind + srcPath.length).replace(/^(\\/+)/g, '');\r\n    ind = -1;\r\n    for (let i = 0; i < srcPath.length; i++) {\r\n      if (srcPath[i] !== dstPath[i]) {\r\n        break;\r\n      }\r\n      ind = i;\r\n    }\r\n    if (ind > -1) {\r\n      srcPath = srcPath.substring(ind);\r\n      dstPath = dstPath.substring(ind);\r\n    }\r\n\r\n    let srcs = srcPath.split('/');\r\n    let dsts = dstPath.split('/');\r\n    let ret = '';\r\n    for (let i = 0; i < srcs.length; i++) {\r\n      ret = ret + '../';\r\n    }\r\n    ret = ret + dstPath;\r\n    // console.log(ret);\r\n\r\n    return ret;\r\n  }\r\n}\r\n\r\nexport default FileUtils"]}