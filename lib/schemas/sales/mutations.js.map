{"version":3,"sources":["../../../src/schemas/sales/mutations.js"],"names":["types","DB","require","commonFields","commonUtils","schemasUtils","material","createDefaultMutaion","materialType","materialInputType","color","colorType","colorInputType","goodsStyle","baseType","baseInputType","goodsSeason","goodsType","goodsShoes","goodsShoesType","goodsShoesInputType","maintainPrice","maintainPriceType","maintainPriceInputType","orderShoes","orderShoesType","orderShoesInputType","custom","customType","customInputType","urgent","urgentType","urgentInputType","orderAdd","type","orderType","args","doc","name","orderInputType","resolve","ctx","params","options","addOrder","shop","result","orderRemove","ids","removeOrderByIds","ret","res","JSON","parse","ok","orderUpdate","operateResultType","updateOrder","_id","mutations"],"mappings":"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","file":"mutations.js","sourcesContent":["import {\r\n  GraphQLObjectType,\r\n  GraphQLNonNull,\r\n  GraphQLString,\r\n  GraphQLID,\r\n  GraphQLInt,\r\n  GraphQLBoolean,\r\n  GraphQLInputObjectType,\r\n  GraphQLList\r\n} from 'graphql';\r\n\r\nimport { \r\n  materialModel, \r\n  colorModel, \r\n  goodsStyleModel, \r\n  goodsSeasonModel, \r\n  goodsTypeModel,\r\n  goodsShoesModel,\r\n  maintainPriceModel,\r\n  orderShoesModel,\r\n  orderModel,\r\n  customModel,\r\n  urgentModel\r\n} from '../../models/sales'\r\nimport {salesData} from '../../data/index';\r\nimport * as types from './types';\r\nconst DB = require('../../db/DB')\r\nconst commonFields = require('../common/common-fields')\r\nconst commonUtils = require('../../utils/common-utils')\r\nconst schemasUtils = require('../../utils/schemas-utils')\r\n\r\nconst material = schemasUtils.createDefaultMutaion('material', types.materialType, types.materialInputType, materialModel);\r\nconst color = schemasUtils.createDefaultMutaion('color', types.colorType, types.colorInputType, colorModel);\r\nconst goodsStyle = schemasUtils.createDefaultMutaion('goodsStyle', types.baseType, types.baseInputType, goodsStyleModel);\r\nconst goodsSeason = schemasUtils.createDefaultMutaion('goodsSeason', types.baseType, types.baseInputType, goodsSeasonModel);\r\nconst goodsType = schemasUtils.createDefaultMutaion('goodsType', types.baseType, types.baseInputType, goodsTypeModel);\r\nconst goodsShoes = schemasUtils.createDefaultMutaion('goodsShoes', types.goodsShoesType, types.goodsShoesInputType, goodsShoesModel);\r\nconst maintainPrice = schemasUtils.createDefaultMutaion('maintainPrice', types.maintainPriceType, types.maintainPriceInputType, maintainPriceModel);\r\nconst orderShoes = schemasUtils.createDefaultMutaion('orderShoes', types.orderShoesType, types.orderShoesInputType, orderShoesModel);\r\nconst custom = schemasUtils.createDefaultMutaion('custom', types.customType, types.customInputType, customModel);\r\nconst urgent = schemasUtils.createDefaultMutaion('urgent', types.urgentType, types.urgentInputType, urgentModel);\r\n\r\n\r\nconst orderAdd = {\r\n  type: types.orderType,\r\n  args: {\r\n    doc: {\r\n      name: 'doc',\r\n      type: new GraphQLNonNull(types.orderInputType)\r\n    }\r\n  },\r\n  async resolve (ctx, params, options) {\r\n    const shop = await salesData.addOrder(params.doc)\r\n    ctx.result = '添加成功！';\r\n    return shop;\r\n  }\r\n};\r\n\r\nconst orderRemove = {\r\n  type: new GraphQLList(GraphQLString),\r\n  args: {\r\n    ids: {type: new GraphQLList(GraphQLString)}\r\n  },\r\n  async resolve (ctx, params, options) {\r\n    const ret = await salesData.removeOrderByIds(params.ids);\r\n    if (ret) {\r\n      let res = JSON.parse(ret);\r\n      if (ret.ok === 1) return params.ids;\r\n      return null;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nconst orderUpdate = {\r\n  type: commonFields.operateResultType,\r\n  args: {\r\n    doc: {type: types.orderInputType},\r\n  },\r\n  async resolve (ctx, params, options) {\r\n    return await salesData.updateOrder({_id:params.doc._id}, params.doc);\r\n  }\r\n}\r\n\r\nlet mutations = {\r\n  ...material, ...color, ...goodsStyle, \r\n  ...goodsSeason, ...goodsType, ...goodsShoes, \r\n  ...maintainPrice, ...orderShoes, ...custom, ...urgent,\r\n  orderAdd, orderRemove, orderUpdate\r\n};\r\nexport default mutations;"]}