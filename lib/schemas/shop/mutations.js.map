{"version":3,"sources":["../../../src/schemas/shop/mutations.js"],"names":["types","commonFields","require","addShop","type","shopType","args","doc","name","shopInputType","resolve","ctx","params","options","add","shop","result","deleteShop","ids","removeByIds","ret","res","JSON","parse","console","log","stringify","ok","updateShop","operateResultType","update","_id"],"mappings":";;;;;;;AAAA;;AAWA;;IAAYA,K;;AACZ;;;;;;AACA,IAAMC,eAAeC,QAAQ,yBAAR,CAArB;;AAGO,IAAMC,4BAAU;AACrBC,QAAMJ,MAAMK,QADS;AAErBC,QAAM;AACJC,SAAK;AACHC,YAAM,KADH;AAEHJ,YAAM,4BAAmBJ,MAAMS,aAAzB;AAFH;AADD,GAFe;AAQfC,SARe,mBAQNC,GARM,EAQDC,MARC,EAQOC,OARP,EAQgB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAChB,gBAASC,GAAT,CAAaF,OAAOL,GAApB,CADgB;;AAAA;AAC7BQ,kBAD6B;;AAEnCJ,kBAAIK,MAAJ,GAAa,OAAb;AAFmC,+CAG5BD,IAH4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIpC;AAZoB,CAAhB;;AAeA,IAAME,kCAAa;AACxBb,QAAM,gDADkB;AAExBE,QAAM;AACJY,SAAK,EAACd,MAAM,gDAAP;AADD,GAFkB;AAKlBM,SALkB,mBAKTC,GALS,EAKJC,MALI,EAKIC,OALJ,EAKa;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACjB,gBAASM,WAAT,CAAqBP,OAAOM,GAA5B,CADiB;;AAAA;AAC7BE,iBAD6B;;AAAA,mBAE/BA,GAF+B;AAAA;AAAA;AAAA;;AAG7BC,iBAH6B,GAGvBC,KAAKC,KAAL,CAAWH,GAAX,CAHuB;;AAIjCI,sBAAQC,GAAR,CAAY,SAASH,KAAKI,SAAL,CAAeL,GAAf,CAArB;;AAJiC,oBAK7BD,IAAIO,EAAJ,KAAW,CALkB;AAAA;AAAA;AAAA;;AAAA,gDAKRf,OAAOM,GALC;;AAAA;AAAA,gDAM1B,IAN0B;;AAAA;AAAA,gDAQ5B,IAR4B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASpC;AAduB,CAAnB;;AAiBA,IAAMU,kCAAa;AACxBxB,QAAMH,aAAa4B,iBADK;AAExBvB,QAAM;AACJC,SAAK,EAACH,MAAMJ,MAAMS,aAAb;AADD,GAFkB;AAKlBC,SALkB,mBAKTC,GALS,EAKJC,MALI,EAKIC,OALJ,EAKa;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACtB,gBAASiB,MAAT,CAAgB,EAACC,KAAInB,OAAOL,GAAP,CAAWwB,GAAhB,EAAhB,EAAsCnB,OAAOL,GAA7C,CADsB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpC;AAPuB,CAAnB","file":"mutations.js","sourcesContent":["import {\r\n  GraphQLObjectType,\r\n  GraphQLNonNull,\r\n  GraphQLString,\r\n  GraphQLID,\r\n  GraphQLInt,\r\n  GraphQLBoolean,\r\n  GraphQLInputObjectType,\r\n  GraphQLList\r\n} from 'graphql';\r\n\r\nimport * as types from './types';\r\nimport {userData, shopData} from '../../data/index';\r\nconst commonFields = require('../common/common-fields')\r\n\r\n\r\nexport const addShop = {\r\n  type: types.shopType,\r\n  args: {\r\n    doc: {\r\n      name: 'doc',\r\n      type: new GraphQLNonNull(types.shopInputType)\r\n    }\r\n  },\r\n  async resolve (ctx, params, options) {\r\n    const shop = await shopData.add(params.doc)\r\n    ctx.result = '添加成功！';\r\n    return shop;\r\n  }\r\n};\r\n\r\nexport const deleteShop = {\r\n  type: new GraphQLList(GraphQLString),\r\n  args: {\r\n    ids: {type: new GraphQLList(GraphQLString)}\r\n  },\r\n  async resolve (ctx, params, options) {\r\n    const ret = await shopData.removeByIds(params.ids);\r\n    if (ret) {\r\n      let res = JSON.parse(ret);\r\n      console.log('ret=' + JSON.stringify(res));\r\n      if (ret.ok === 1) return params.ids;\r\n      return null;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\nexport const updateShop = {\r\n  type: commonFields.operateResultType,\r\n  args: {\r\n    doc: {type: types.shopInputType},\r\n  },\r\n  async resolve (ctx, params, options) {\r\n    return await shopData.update({_id:params.doc._id}, params.doc);\r\n  }\r\n}\r\n"]}